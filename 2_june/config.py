# config.py

# 1. Define Input Data
tech_map_data = {
    # Этапы 1-3 (Подготовка смеси, 18-24 мин) -> Комбинирование: "0:21:00"
    # Этап 4 (Замес): Формовые "0:12:00", Остальные (10-11 мин) "0:10:30"
    # Этап 5 (Деление и формовка, 10-12 мин) -> Формовка: "0:11:00"
    # Этап 6 (Расстойка): Н/Д для "Остальных видов" -> "0:25:00" (среднее)
    # Выпекание: согласно таблице (16-17 -> "0:16:30", 18-19 -> "0:18:30")
    # Остывание/Упаковка: типовые значения

    "Мини формовой":        {"Комбинирование": "0:21:00", "Смешивание": "0:12:00", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:45:00", "Остывание": "1:30:00", "Упаковка": "0:10:00"},
    "Формовой":             {"Комбинирование": "0:21:00", "Смешивание": "0:12:00", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:45:00", "Остывание": "1:30:00", "Упаковка": "0:10:00"},
    "Домашний":             {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:17:00", "Остывание": "1:00:00", "Упаковка": "0:10:00"},
    "Семейный":             {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:17:00", "Остывание": "1:00:00", "Упаковка": "0:10:00"},
    "Славянский":           {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:17:00", "Остывание": "1:00:00", "Упаковка": "0:10:00"},
    "Жайлы":                {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:17:00", "Остывание": "1:00:00", "Упаковка": "0:10:00"},
    "Отрубной (общий)":     {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:17:00", "Остывание": "1:00:00", "Упаковка": "0:10:00"},
    "Любимый":              {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:17:00", "Остывание": "1:00:00", "Упаковка": "0:10:00"},
    "Датский":              {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:17:00", "Остывание": "1:00:00", "Упаковка": "0:10:00"},
    "Тартин (из таблицы)":  {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:17:00", "Остывание": "1:00:00", "Упаковка": "0:10:00"},
    "Зерновой Столичный":   {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:17:00", "Остывание": "1:00:00", "Упаковка": "0:10:00"},
    "Здоровье":             {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:18:00", "Остывание": "1:00:00", "Упаковка": "0:10:00"},
    "Бородинский":          {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:20:00", "Выпекание": "0:55:00", "Остывание": "2:00:00", "Упаковка": "0:15:00"},
    "Булочка для гамбургера большой с кунжутом": {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:22:00", "Остывание": "0:45:00", "Упаковка": "0:15:00"},
    "Булочка для хотдога штучно": {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:22:00", "Остывание": "0:45:00", "Упаковка": "0:15:00"},
    "Сэндвич": {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:22:00", "Остывание": "0:45:00", "Упаковка": "0:15:00"},
    "Хлеб «Тартин бездрожжевой»":               {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:20:00", "Выпекание": "0:16:30", "Остывание": "1:00:00", "Упаковка": "0:10:00"},
    "Береке":               {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:20:00", "Выпекание": "0:16:30", "Остывание": "1:00:00", "Упаковка": "0:10:00"},
    "Баварский Деревенский Ржаной": {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:30:00", "Выпекание": "0:18:30", "Остывание": "1:30:00", "Упаковка": "0:10:00"},
    "Плетенка":             {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:17:00", "Остывание": "1:00:00", "Упаковка": "0:10:00"},
    "Батон Верный":         {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:17:00", "Остывание": "1:00:00", "Упаковка": "0:10:00"},
    "Батон Нарезной":       {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:17:00", "Остывание": "1:00:00", "Упаковка": "0:10:00"},
    "Диета":                {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:37:30", "Выпекание": "0:35:00", "Остывание": "1:30:00", "Упаковка": "0:10:00"},
    "Багет отрубной": {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:18:00", "Остывание": "0:45:00", "Упаковка": "0:10:00"},
    "Премиум":              {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:25:00", "Остывание": "1:15:00", "Упаковка": "0:10:00"},
    "Хлеб «Зерновой»":          {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:25:00", "Остывание": "1:15:00", "Упаковка": "0:10:00"},
    "Багет новый":          {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:25:00", "Остывание": "1:15:00", "Упаковка": "0:10:00"},
    "Чиабатта":          {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:25:00", "Выпекание": "0:25:00", "Остывание": "1:15:00", "Упаковка": "0:10:00"},
    "Багет луковый":        {"Комбинирование": "0:21:00", "Смешивание": "0:10:30", "Формовка": "0:11:00", "Расстойка": "0:20:00", "Выпекание": "0:18:00", "Остывание": "0:45:00", "Упаковка": "0:10:00"},}
#     # Оригинальные данные из вашего первого скрипта для сравнения и использования
#     "Чиабатта":                      {"Комбинирование": "0:03:39", "Смешивание": "0:15:00", "Формовка": "0:20:00", "Расстойка": "0:30:00", "Выпекание": "0:25:00", "Остывание": "1:00:00", "Упаковка": "0:15:00"},
#     "Булочка":               {"Комбинирование": "0:03:39", "Смешивание": "0:11:00", "Формовка": "0:21:30", "Расстойка": "0:45:00", "Выпекание": "0:22:00", "Остывание": "1:15:00", "Упаковка": "0:15:00"},
#     "Булочка для хот-дог/гамбургера (ориг.)": {"Комбинирование": "0:03:39", "Смешивание": "0:12:00", "Формовка": "0:25:00", "Расстойка": "0:00:00", "Выпекание": "0:40:00", "Остывание": "2:45:00", "Упаковка": "0:15:00"}, # Здесь расстойка была 0
#     "Бриошь":                        {"Комбинирование": "0:03:39", "Смешивание": "0:07:00", "Формовка": "0:25:00", "Расстойка": "0:20:00", "Выпекание": "0:03:00", "Остывание": "0:20:00", "Упаковка": "0:15:00"},
#     "Булочка для гамбургера большой/ с кунжутом": {"Комбинирование": "0:03:39", "Смешивание": "0:10:00", "Формовка": "0:30:00", "Расстойка": "1:00:00", "Выпекание": "0:35:00", "Остывание": "2:30:00", "Упаковка": "0:15:00"},
#     "Немецкий хлеб":                 {"Комбинирование": "0:03:39", "Смешивание": "0:12:00", "Формовка": "0:30:00", "Расстойка": "1:10:00", "Выпекание": "0:40:00", "Остывание": "2:40:00", "Упаковка": "0:15:00"},
#     "Хлеб «Зерновой»":               {"Комбинирование": "0:03:39", "Смешивание": "0:18:00", "Формовка": "0:35:00", "Расстойка": "1:00:00", "Выпекание": "0:18:00", "Остывание": "1:00:00", "Упаковка": "0:15:00"},
#     "Хот-дог/Гамбургер солодовый с семечками": {"Комбинирование": "0:03:39", "Смешивание": "0:09:00", "Формовка": "0:40:00", "Расстойка": "0:40:00", "Выпекание": "0:20:00", "Остывание": "0:45:00", "Упаковка": "0:15:00"},
#     "Сэндвич":                       {"Комбинирование": "0:03:39", "Смешивание": "0:08:00", "Формовка": "1:00:00", "Расстойка": "0:50:00", "Выпекание": "0:25:00", "Остывание": "2:00:00", "Упаковка": "0:15:00"},
#     "Хлеб «Тартин бездрожжевой»":     {"Комбинирование": "0:03:39", "Смешивание": "0:08:00", "Формовка": "3:00:00", "Расстойка": "0:00:00", "Выпекание": "0:18:00", "Остывание": "0:40:00", "Упаковка": "0:15:00"}, # Здесь расстойка была 0
# }



orders_complex = {
    # High volume of standard items
    "Формовой":             1200, # 12 batches - heavy use of Формовка, Выпекание
    "Бородинский":          800,  # 8 batches - long Выпекание, Расстойка
    "Домашний":             900,  # 9 batches - standard, uses Расстойка
    "Багет луковый":        700,  # 7 batches - shorter Выпекание, uses Расстойка

    # Items with potentially long or conflicting stages from your tech_map
    "Хлеб «Тартин бездрожжевой»": 600, # 6 batches - VERY long Формовка (3:00:00), 0 Расстойка, short Выпекание
                                      # This will heavily block "Формовка" machines.
                                      # NOTE: Ensure this key matches your tech_map_data exactly!
                                      # If your tech_map has "Хлеб «Тартин бездрожжевой»", use that.
                                      # If it's "Хлеб «Тартин бездрожжевой» (ориг.)" in tech_map, use that.

    "Булочка":      1000, # 10 batches - this was problematic for the heuristic
    "Чиабатта":             500,  # 5 batches - uses Расстойка
                                      # NOTE: Ensure this key matches! "Чиабатта" or "Чиабатта (ориг.)"

    # Add some more variety to stress different parts
    "Сэндвич":              400,  # 4 batches - long Формовка (1:00:00), uses Расстойка
    "Немецкий хлеб":        300,  # 3 batches - long Расстойка (1:10:00), long Остывание
    
    "Мини формовой":        500,   # 5 batches - similar to Формовой but maybe different batching
    "Диета":                200,   # 2 batches - longer Расстойка (0:37:30) and Выпекание (0:35:00)

    # A product that might use "Комбинирование" and "Смешивание" heavily but is quick elsewhere
    "Бриошь":               600,   # 6 batches - very short Выпекание, Остывание

    # Total Batches: 12+8+9+7+6+10+5+4+3+5+2+6 = 77 batches
    # (Original small order was ~18 batches)
}
# Using the orders_one_day structure as the primary orders list
orders = {
    # Продукты из вашей таблицы (с расстойкой 25 мин для "Н/Д", если применимо)
    "Формовой":             400,  # 4 партии
    "Бородинский":          200,  # 2 партии
    "Домашний":             300,  # 3 партии (с расстойкой 25 мин)
    "Багет луковый":        300,  # 3 партии
    
    # Продукты из вашего "оригинального" списка для разнообразия
    # ВАЖНО: Ключи "Чиабатта (ориг.)" и "Хлеб «Тартин бездрожжевой» (ориг.)"
    # НЕ СОВПАДАЮТ с ключами в tech_map_data ("Чиабатта", "Хлеб «Тартин бездрожжевой»").
    # Эти продукты будут пропущены, если ключи не исправить.
    "Чиабатта":     200,  # 2 партии 
    "Хлеб «Тартин бездрожжевой»": 100, # 1 партия (длинная формовка, 0 расстойка)
    "Булочка":      300,  # 3 партии
}
# Итого по orders_one_day (если все продукты есть в tech_map): 4+2+3+3+2+1+3 = 18 партий.

machines_available = {
    "Комбинирование": 1,
    "Смешивание": 3,
    "Формовка": 2,
    "Расстойка": 8, # Может стать узким местом, т.к. у многих теперь есть расстойка
    "Выпекание": 6, # Ограниченное количество печей для более реалистичного сценария
    "Остывание": 25, # Достаточно места для остывания
    "Упаковка": 10,
}

orders_simple = {
    "Формовой": 100,
    "Бородинский": 100,
    "Домашний": 100,
    "Багет луковый": 100,
}

# --- Параметры ---
BATCH_SIZE = 100 # Размер партии
STAGES = [
    "Комбинирование", "Смешивание", "Формовка", "Расстойка",
    "Выпекание", "Остывание", "Упаковка",
]

MAX_WAIT_COMBINING_MIXING_MIN = 15
MAX_WAIT_MIXING_FORMING_MIN = 20
MAX_WAIT_FORMING_PROOFING_MIN = 30
MAX_WAIT_PROOFING_BAKING_MIN = 60

CRITICAL_STAGE_BEFORE_0 = "Комбинирование"
CRITICAL_STAGE_AFTER_0 = "Смешивание"
CRITICAL_STAGE_BEFORE_1 = "Смешивание"
CRITICAL_STAGE_AFTER_1 = "Формовка"
CRITICAL_STAGE_BEFORE_2 = "Формовка"
CRITICAL_STAGE_AFTER_2 = "Расстойка"
CRITICAL_STAGE_BEFORE_3 = "Расстойка"
CRITICAL_STAGE_AFTER_3 = "Выпекание"

# --- Имя выходного файла ---
OUTPUT_CSV_FILE = 'production_schedule.csv'
OUTPUT_TXT_FILE = 'production_summary.txt'

# --- Параметры решателя ---
SOLVER_TIME_LIMIT_SECONDS = 300 # 300.0 # Установите лимит времени в секундах или None для отсутствия лимита